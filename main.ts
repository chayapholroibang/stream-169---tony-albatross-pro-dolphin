namespace SpriteKind {
    export const Ring = SpriteKind.create()
    export const RingBack = SpriteKind.create()
    export const Collectible = SpriteKind.create()
    export const Bird = SpriteKind.create()
}
/**
 * Dolphin movement:
 * 
 * 1. underwater - no gravity
 * 
 * 2. above water - gravity
 * 
 * 3. momentum 
 * 
 * 4. large turn radius
 */
/**
 * barrel roll
 * 
 * flip 360
 * 
 * barrel roll + flip 360
 */
scene.onHitWall(SpriteKind.Player, function (sprite, location) {
    currentSpeed = 90
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    do_a_stunt()
})
function setIsUnderTheSea (underwater: boolean) {
    if (underwater) {
        if (!(areWeUnderTheSea)) {
            controlLockEndTime = game.runtime() + 500
            if (sloppy || (barrel_roll_count || flip_count)) {
                timer.after(1000, function () {
                    do_score()
                })
            }
        }
        dolphinBody.fx = 100
        dolphinBody.ay = 0
    } else {
        dolphinBody.fx = 0
        dolphinBody.ay = 200
    }
    areWeUnderTheSea = underwater
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    do_a_stunt()
})
function createEdibleFish () {
    edibleFishImages = [
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 5 5 5 8 8 5 . . . . . 
        . . . 5 5 5 5 5 8 8 8 5 . . . 5 
        . . 5 5 5 5 5 5 5 8 8 5 8 . . 5 
        . 5 5 f 5 5 5 f 5 8 8 5 5 8 5 5 
        5 5 5 5 5 5 5 5 5 8 8 8 5 8 5 . 
        5 5 5 5 f f f 5 5 8 8 5 5 8 5 5 
        . 5 5 5 5 5 5 5 5 8 8 5 8 . 5 5 
        . . . 5 5 5 5 5 8 8 8 5 8 . 5 5 
        . . . . . 5 5 5 8 8 5 8 . . . 5 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 4 4 1 4 4 . 4 4 . . . . 
        . . . 4 4 4 1 1 4 1 4 . . . . . 
        . . 4 f 4 f 4 1 4 1 4 . . . . . 
        . . . 4 4 4 1 4 . . 4 4 . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . b a a . . . . . 
        . . . . . . . b a a . . . . . . 
        . . . . . . b b a a a . . . a . 
        . . . . . . a a a a a . . a 3 . 
        . . . . . a a a a a a . a 3 . . 
        . a a a a f a a f a a a a . . . 
        . c c c a a a a a a 3 a a . . . 
        . . . . a a a a a a 3 a a . . . 
        . . . . c c a a a 3 a a a . . . 
        . . . . . c c a 3 a a a a a . . 
        . . . . . . c c a a a . 3 a . . 
        . . . . . . c c a a a . . 3 3 . 
        . . . . . . . c a a a . . . 3 . 
        . . . . . . . . c a c . . . . . 
        . . . . . . . . . c c c . . . . 
        . . . . . . . . . . . c c . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . 7 . . . . . . . . . 
        . . . . . 7 7 . . . . . . . 7 7 
        . . 7 7 7 7 7 5 7 5 7 . 7 7 7 . 
        7 7 f 7 f 7 7 5 7 5 7 5 7 . . . 
        . 7 7 7 7 7 7 5 7 5 7 5 7 . . . 
        . . . . 8 8 7 . . . . . 7 7 . . 
        . . . . . . 8 . . . . . . 7 7 7 
        . . . . . . . . . . . . . . . 7 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . a a a a a . . . . . . 
        . . . a a a a f a a a . . . . . 
        8 a a a f a a a a a a a . . a a 
        8 8 a a a a a a a a 8 a a a 8 . 
        8 8 8 8 8 8 a a 8 a a 8 a 8 a . 
        . . . . 8 8 8 8 8 8 8 a . . a a 
        . . . . . 8 8 8 8 8 8 . . . . a 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . 2 . . . . . . . . . 
        . . . . 2 2 2 2 2 . 2 . . . . . 
        . . . 2 2 e 2 e e e 2 . . . . . 
        . . . . . . e . . . 2 . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 5 8 5 . . . . . . . . . 
        . . . . 5 5 8 5 . 5 . . . . . . 
        . . . 5 5 5 8 5 8 . . . . . . . 
        . . . 5 5 5 8 5 8 . . . . . . . 
        . . . . 5 8 5 . . 5 . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `,
    img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . 9 . . . . . . . . 
        . . . . . 7 9 9 9 9 . . 7 . . . 
        . . . . 7 7 7 7 7 7 7 7 . . . . 
        . . . . . 7 7 7 7 7 . . 7 . . . 
        . . . . . . . 7 . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `
    ]
    edibleFishImagesRight = []
    for (let value of edibleFishImages) {
        flippedImage = value.clone()
        edibleFishImagesRight.push(flippedImage)
        flippedImage.flipX()
    }
    edibleFish = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Food)
    sprites.setDataNumber(edibleFish, "imageIndex", randint(0, edibleFishImages.length - 1))
    sprites.setDataBoolean(edibleFish, "facingLeft", Math.percentChance(50))
    tiles.placeOnTile(edibleFish, getOffscreenOceanTile())
    updateEdibleFishDirection(edibleFish)
}
scene.onOverlapTile(SpriteKind.Food, assets.tile`tile2`, function (sprite, location) {
    sprite.vy = Math.abs(sprite.vy)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile3`, function (sprite, location) {
    setIsUnderTheSea(false)
})
info.onCountdownEnd(function () {
    if (areWeUnderTheSea) {
        do_score()
    }
    game.over(true)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Collectible, function (sprite, otherSprite) {
    otherSprite.destroy(effects.confetti, 500)
    acellerationBoost += 1
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile1`, function (sprite, location) {
    setIsUnderTheSea(true)
})
function getOffscreenOceanTile () {
    tileList = tiles.getTilesByType(assets.tile`tile1`)
    tileToCheck = tileList.removeAt(randint(0, tileList.length - 1))
    while (!(tiles.locationXY(tileToCheck, tiles.XY.right) < dolphinBody.x - 80 || tiles.locationXY(tileToCheck, tiles.XY.left) > dolphinBody.x + 80)) {
        tileToCheck = tileList.removeAt(randint(0, tileList.length - 1))
    }
    return tileToCheck
}
function do_score () {
    info.changeScoreBy(barrel_roll_count * 200)
    if (flip_count) {
        info.changeScoreBy(2 ** flip_count * 200)
    }
    if (touched_space) {
        info.changeScoreBy(500)
    }
    if (sloppy) {
        info.changeScoreBy(-300)
    }
    sloppy = false
    barrel_roll_count = 0
    flip_count = 0
    touched_space = false
    update_trick_counter()
}
function updateEdibleFishDirection (fish: Sprite) {
    if (sprites.readDataBoolean(fish, "facingLeft")) {
        fish.setImage(edibleFishImages[sprites.readDataNumber(fish, "imageIndex")])
        fish.setVelocity(-5, randint(-5, 5))
    } else {
        fish.setImage(edibleFishImagesRight[sprites.readDataNumber(fish, "imageIndex")])
        fish.setVelocity(5, randint(-5, 5))
    }
}
scene.onHitWall(SpriteKind.Food, function (sprite, location) {
    sprites.setDataBoolean(sprite, "facingLeft", !(sprites.readDataBoolean(sprite, "facingLeft")))
    updateEdibleFishDirection(sprite)
})
function song_2 () {
    tempo = 700
    for (let index = 0; index < 2; index++) {
        for (let index = 0; index < 4; index++) {
            music.playMelody("C - E - G - - - ", tempo)
        }
        for (let index = 0; index < 4; index++) {
            music.playMelody("D - F - A - - - ", tempo)
        }
    }
    for (let index = 0; index < 2; index++) {
        for (let index = 0; index < 4; index++) {
            music.playMelody("E - G - B - - - ", tempo)
        }
        for (let index = 0; index < 4; index++) {
            music.playMelody("F - A - C5 - - - ", tempo)
        }
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    currentSpeed += 50
    otherSprite.destroy(effects.disintegrate, 500)
    for (let index = 0; index < 3; index++) {
        dolphin.startEffect(effects.trail, 1000)
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`tile10`, function (sprite, location) {
    touched_space = true
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.RingBack, function (sprite, otherSprite) {
    sprite.say("SICK!!!", 500)
    otherSprite.startEffect(effects.confetti, 500)
})
function do_a_stunt () {
    if (titleHidden) {
        if (!(doingATrick)) {
            if (!(areWeUnderTheSea)) {
                timer.background(function () {
                    if (dolphinBody.vy < -200) {
                        animation.runImageAnimation(
                        dolphin,
                        [img`
                            ................................
                            ........bb......................
                            ........bbd.....................
                            .......bbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            .....bbbbfb.....................
                            ....bbbbbbbb....................
                            ....bbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbbb..................
                            ...bbbbbbbbbbb..................
                            ..bbbbbbbbbbbb..................
                            ..bbbbbbbbbb.bb.................
                            ..bbdbbbbbbb....................
                            ..bbdbbbbbbb....................
                            ..bbdbbbbbbb....................
                            .bbbdbbbbbb.....................
                            .bbb.bbbbbb.....................
                            ..b..bbbbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            .......bbbb.....................
                            ........bbb.....................
                            ........bbbb....................
                            .......bbbbb....................
                            ......bbbbbb....................
                            ......bb.bbb....................
                            .....bb...bb....................
                            ................................
                            `,img`
                            ................................
                            .......bb.......................
                            .......bb.......................
                            ......bbbb......................
                            ......bbbb......................
                            .....bbbbbb.....................
                            ....bfbbbbfb....................
                            ....bbbbbbbb....................
                            ....bbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbbb...................
                            ..bbbbbbbbbbbb..................
                            .bbbbbbbbbbbbb..................
                            .bbbbbbcbbbbbbb.................
                            bbbbbbbcbbbbbbb.................
                            bbbbbbbcbbbbbbbb................
                            bbbbbbbcbbbbbbbb................
                            bbb.bbbcbbbb.bbb................
                            bb...bbbbbbb...b................
                            .....bbbbbb.....................
                            .....bbbbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            ......bbbbb.....................
                            ......bbbb......................
                            .....bbbbbb.....................
                            .....bbbbbbb....................
                            ....bbbbbbbbb...................
                            ...bbbb..bbbbb..................
                            ..bbb.....bbb...................
                            ................................
                            `,img`
                            ................................
                            .......db.......................
                            ......ddb.......................
                            ......ddb.......................
                            .....dbbb.......................
                            .....dbbbbb.....................
                            .....dbbbfb.....................
                            ....dbbbbbb.....................
                            ....dbbbbbbb....................
                            ...bdbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbbb..................
                            ...bbbbbbbbbbb..................
                            ..bbbbbbbbbbbb..................
                            ..bbbbbbbbbdbbb.................
                            .bbbbbbbbbbdbbb.................
                            .bbbbbbbbbbddbb.................
                            .bbbbbbbbbbbdbb.................
                            bbb.bbbbbbbb..b.................
                            b...bbbbbbbb....................
                            ....bbbbbbbb....................
                            .....bbbbbb.....................
                            .....bbbbb......................
                            .....bbbbb......................
                            .....bbbbb......................
                            .....bbbbb......................
                            .....bbbbbb.....................
                            .....bbbbbb.....................
                            ......bbbbb.....................
                            ......bbb.bb....................
                            ......bbb..bb...................
                            .......bb.......................
                            `,img`
                            ...ddb..........................
                            ...ddb..........................
                            ...ddbb.........................
                            ...ddbb.........................
                            ...ddbbbb.......................
                            ...dddbbbfb.....................
                            ...ddddbbbbb....................
                            ...dddddbbbb....................
                            ...ddddddbbbb...................
                            ...dddddddbbb...................
                            ...ddddddddbb...................
                            ...ddddddddbb...................
                            ...ddddddbbbb...................
                            ...ddddddbbbbb..................
                            ..bdddddddbbbbbb................
                            ..bbdddddddbbbbbb...............
                            ..bbdddddddbb..bbb..............
                            .bbbdddddddbb...................
                            .b..dddddddbb...................
                            ....ddddddbbb...................
                            ....ddddddbbb...................
                            ....ddddddbb....................
                            ....dddddbbb....................
                            .....ddddbb.....................
                            .....ddddbb.....................
                            .....ddddbb.....................
                            .....bbbbbb.....................
                            ....bbbbbbb.....................
                            ....bbbbbbb.....................
                            ...bbbb.bbb.....................
                            ..bbbb..bbbb....................
                            ..bbb.....bb....................
                            `,img`
                            ........bbd.....................
                            ........bbd.....................
                            ........bbd.....................
                            .......bbdd.....................
                            .......bbdd.....................
                            .....bbbdddd....................
                            ....bfbbdddd....................
                            ...bbbdddddd....................
                            ..bbbbdddddd....................
                            ..bbbddddddd....................
                            ..bbbddddddd....................
                            .bbbbddddddd....................
                            .bbbbddddddd....................
                            ..bbbdddddddb...................
                            ..bbbbddddddbb..................
                            ..bbbbddddddbbb.................
                            ..bbbbddddddbbbb................
                            ..bbbbdddddd...b................
                            ...bbbbddddd....................
                            ...bbbbdddd.....................
                            ...bbbbdddd.....................
                            ...bbbbdddd.....................
                            ....bbbddd......................
                            ....bbbddd......................
                            .....bbddd......................
                            .....bbbd.......................
                            .....bbbd.......................
                            .....bbbb.......................
                            ...bbbbbb.......................
                            ..bbbbbbbb......................
                            ..bbbb..bbb.....................
                            ................................
                            `,img`
                            ................................
                            ........bd......................
                            ........bdd.....................
                            ........bdd.....................
                            ......bbbdd.....................
                            .....bbfbdd.....................
                            .....bbbbdd.....................
                            ....bbbbbdd.....................
                            ....bbbbbbbb....................
                            ...bbbbbbbbb....................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbbbbb...................
                            ...bbbbbbddbbb..................
                            ..bbbbbbbdd.bb..................
                            .bbbbbbbbdd..b..................
                            .bbbbbbbbdd.....................
                            bbbbbbbbbdd.....................
                            bbbbbbbbbdd.....................
                            bbb.bbbbbdd.....................
                            bb...bbbbdd.....................
                            b....bbbbbd.....................
                            ......bbbbd.....................
                            .......bbbd.....................
                            .......bbbb.....................
                            ........bbb.....................
                            ........bbb.....................
                            ........bbbb....................
                            .......bbbbbb...................
                            .......bbb.bbb..................
                            .......bb...bbb.................
                            ......bb......b.................
                            `],
                        100,
                        false
                        )
                        doingATrick = true
                        pause(600)
                        doingATrick = false
                        barrel_roll_count += 1
                    } else if (dolphinBody.vy > 0) {
                        if (dolphinBody.vx >= 0) {
                            animation.runImageAnimation(
                            dolphin,
                            dolphin_image,
                            50,
                            false
                            )
                        } else {
                            animation.runImageAnimation(
                            dolphin,
                            backflip_images,
                            50,
                            false
                            )
                        }
                        doingATrick = true
                        pause(500)
                        doingATrick = false
                        if (areWeUnderTheSea) {
                            sloppy = true
                        } else {
                            flip_count += 1
                        }
                    }
                    update_trick_counter()
                })
            }
        }
    }
}
function update_trick_counter () {
    trick_string = ""
    if (barrel_roll_count == 2) {
        trick_string = "2x "
    } else if (barrel_roll_count == 3) {
        trick_string = "3x "
    } else if (barrel_roll_count == 4) {
        trick_string = "4x "
    }
    if (barrel_roll_count >= 1) {
        trick_string = "" + trick_string + "BARREL ROLL "
        if (flip_count >= 1) {
            trick_string = "" + trick_string + "+ "
        }
    }
    if (flip_count >= 1) {
        trick_string = "" + trick_string + "FLIP " + 360 * flip_count
    }
    trick_text.setText(trick_string)
    trick_text.setPosition(80, 100)
    if (sloppy) {
        lame_text.setText("- SLOPPY")
    } else {
        lame_text.setText("")
    }
    lame_text.setPosition(80, 110)
    if (touched_space) {
        trick_text_line_2.setText("+ TOUCHED SPACE")
        trick_text.y += -5
        lame_text.y += 5
        trick_text_line_2.setPosition(80, 105)
    } else {
        trick_text_line_2.setText("")
    }
}
function moveTowardsAngle (degrees: number) {
    if (Math.abs(direction - degrees) < 180) {
        if (direction < degrees) {
            direction += 5
        } else if (direction > degrees) {
            direction += -5
        }
    } else {
        if (direction < degrees) {
            direction += -5
        } else if (direction > degrees) {
            direction += 5
        }
    }
    if (direction < 0) {
        direction += 360
    }
    if (direction > 360) {
        direction += -360
    }
    spriteutils.setVelocityAtAngle(dolphinBody, spriteutils.degreesToRadians(direction), currentSpeed)
    currentSpeed += 1 + acellerationBoost / 5
}
let bird: Sprite = null
let trick_string = ""
let doingATrick = false
let tempo = 0
let touched_space = false
let tileToCheck: tiles.Location = null
let tileList: tiles.Location[] = []
let acellerationBoost = 0
let edibleFish: Sprite = null
let flippedImage: Image = null
let edibleFishImagesRight: Image[] = []
let edibleFishImages: Image[] = []
let flip_count = 0
let barrel_roll_count = 0
let sloppy = false
let controlLockEndTime = 0
let areWeUnderTheSea = false
let currentSpeed = 0
let lame_text: TextSprite = null
let trick_text_line_2: TextSprite = null
let trick_text: TextSprite = null
let starman: Sprite = null
let ringFront: Sprite = null
let ringBack: Sprite = null
let direction = 0
let dolphin_image_temp: Image = null
let backflip_images: Image[] = []
let dolphin_image: Image[] = []
let dolphinBody: Sprite = null
let dolphin: Sprite = null
let titleHidden = false
let title = sprites.create(img`
    1111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111111111111111111111
    1111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111111111111111111111
    1111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111111111111111111111
    1111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111111111111111111111111
    1111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111111111111111111
    1111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111111111111111111
    1111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111191111111111
    1111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111119999111111111
    1111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111111
    1111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111111
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911111
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999991111
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999911
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111999999999999999999999999999999999999999999999991111111111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999
    9111111999999999999999999999999999999999999999111111111111111111111111111111111111111111111111111111191111119999999999999999999999999999999999999999999999999999
    9111199999999999999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111999999999999999999999999999999999999999
    9999999999999999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111999999999999999999999999999999999999
    9999999999999999999999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111999999999999999999999999999999999
    9999999999999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111199999999999999999999999999999999
    9999999999999999999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111199999999999999999999999999999
    9999999999999999999999999999991111111111111111111111111111111111111111111111111111111111111111111fff111111111111111111111111111111111999999999999999999999999999
    99999999999999999999999999999111111111111111111111111111111111111111111fff1111111111111fff111111ffff111111111111111111111111111111111119999999999999999999999999
    99999999999999999999999999991111fffffffffffffffffff1111ffffff111111111fffff1111111fff11fffff1111ffff111111111111111111111111111111111111999999999999999999999999
    99999999999999999999999999911111fffffffffffffffffff11ffffffffff1111111fffff111111ffff11ffffff11ffff1111111111111111111111111111111111111999999999999999999999999
    99999999999999999999999999111111fffffffffffffffffff1ffffffffffff11111fffffff1111fffff111fffffffffff1111111111111111111111111111111111111119999999999999999999999
    99999999999999999999999991111111111111111ffff1111111fffffffffffff1111fffffff1111ffff111111ffffffff11111111111111111111111111111111111111119999999999999999999999
    99999999999999999999999911111111111111111ffff1111111ffff1111fffff1111fffffff111ffff11111111ffffff111111111111111111111111111111111111111111999999999999999999999
    9999999999999999999999991111111111111111ffff11111111fff1111111fff111ffff1ffff1fffff111111111ffff1111111111111111111111111111111111111111111199999999999999999999
    9999999999999999999999911111111111111111ffff11111111fff11111fffff111ffff1ffff1ffff111111111ffff11111111111111111111111111111111111111111111199999999999999999999
    999999999999999999999911111111111111111fffff11111111ffff111ffffff11ffff111fffffff111111111fffff11111111111111111111111111111111111111111111119999999999999999999
    999999999999999999999911111111111111111ffff111111111ffffffffffff111ffff111fffffff111111111ffff111111111111111111111111111111111111111111111119999999999999999999
    999999999999999999999111111111111111111ffff1111111111fffffffff11111fff1111ffffff111111111ffff1111111111111111111111111111111111111111111111111999999999999999999
    999999999999999999991111111111111111111fff111111111111fffffff111111fff11111ffff1111111111ffff1111111111111111111111111111111111111111111111111199999999999999999
    999999999999999999991111111111111111111fff11111111111111fffff11111111111111ffff1111111111fff11111111111111111111111111111111111111111111111111199999999999999999
    9999999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111199999999999999999
    9999999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111199999999999999999
    9999999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111199999999999999999
    99999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111999bbbb9999999999
    9999999999999999991111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111199bbbbb9999999999
    9999999999999999991111111111111111111111111111111111111111111111111111111111111111111111111111111111111fff11111111ffff11111fffff1111111111111119bbbbbb9999999999
    999999999999999991111111ffff1111111111111111111ffffffff1111111fff111111fffffffffffffff11111111111111111fffff11111ffffff11ffffffff11111111111111bbbbbbb9999999999
    99999999999999999111111fffff111111fff1111111111fffffffff11111fffff11111fffffffffffffff11fffffffffff11ffffffffff1fffffff1fffffffff1111111111111bbbbbbbb9999999999
    99999999999999999111111fffff111111fff1111111111fffffffff11111fffff11111fffffffffffffff11fffffffffff11ffffffffff1fffffffffffff1fff111111111111bbbbbbbbb9999999999
    9999999999999999111111fffffff11111fff1111111111fff111fff1111fffffff11111111111fff1111111fffffffffff11fff11fffff1fff1fffffff111bbbbb111111111bbbbbbbbb99999999999
    9999999999999999111111fffffff11111fff111111111ffff111fff1111fffffff11111111111fff111111ffff111ffff11ffff111ffff1fff1111fff1111bbbbbbbbb1111bbbbbbbbb999999999999
    999999999999999911111ffff1fff11111fff111111111ffff1fffff111ffff1ffff111111111ffff111111ffff111ffff11ffff111fff11fff1111fffff11bbbbbbbbbbbbbbbbbbbbb9999999999999
    999999999999999911111ffffffff11111fff111111111ffffffffff111ffffffffff11111111ffff111111ffffffffff111fff111ffff11fffff11ffffff11bcbbbbbbbbbbbbbbbbb99999999999999
    99999999999999991111ffffffffff1111fff111111111fffffffff111fffffffffff11111111fff111111fffffffffff11ffff111ffff11ffffff1fffffff1cccbbbbbbbbbbbbbbb999999999999999
    99999999999999991111ffffffffff1111fff111111111fffffffff111fffffffffff11111111fff111111fffffffffff11ffff11ffff111ffffff1111fffff1ccbbbbbbbbbbbbbb9999999999999999
    9999999999999999111fffffff1fff1111fff11111111ffffff1fff11ffffffffffff1111111ffff11111ffff1111fff111fff111ffff111111fff11111fffff1ccbbbbbbbbbbbb99999999999999999
    9999999999999999111ffff1111ffff111fff11111111ffff111fff11ffff11111ffff111111ffff11111ffff1111fff11ffff1fffff111111ffff11ffffffff11ccccbbbbbbbb999999999999999999
    999999999999999911ffff11111ffff111fff11111111fff111ffff1ffff111111ffff111111fff111111fff11111fff11ffffffffff11111fffff11ffffffff111cccccbbbbbbd99999999999999999
    999999999999999911ffff111111fff111fffffffff11fff1ffffff1ffff1111111ffff1111ffff11111ffff11111fff11fffffffff111fffffff111fffffff11111cccccbbbbbd99999999999999999
    999999999999999911fff1111111ffff1ffffffffff1ffffffffff11fff11111111ffff1111ffff11111ffff11111fff111ffffff11111ffffff11111111111111111cccccbbbbdd9999999999999999
    999999999999999911fff1111111ffff1ffffffffff1fffffffff111fff111111111fff1111fff111111fff111111fff111ffff1111111fffff1111111111111111111cccccbbbddd999999999999999
    99999999999999991111111111111fff1fff11111111fffffff111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccccbbbdddd99999999999999
    999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccccbbbddddd9999999999999
    9999999999999999111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cccbbbddddd9999999999999
    9999999999999999111111111111222211111111111111111111111111111111111111111111111111111111111111111111111111111111111111116661111111111111cccbbbbddddd999999999999
    99999999999999991111111112222222221111111111111111111111111111111111111111111111111111111111111111111111111666111111111166611111111111111ccbbbbddddd999999999999
    99999999999999991111111122222222222111111111111111111111111111111111111111111111111111111111111111111111111666111111111166611111111111111ccbbbbbddddd99999999999
    99999999999999991111111122222222222111111111111111111111111111116661111111111111111111111111666111111111111666666666111111111166666611111ccbbbbbddddd99999999999
    99999999999999999111111122221112222111111111111111111111111111116661111111111111116666661111666611166611111666666666611111111166666661111cbbbbbbbdddd99999999999
    999999999999999991111111222111112222111111111111222221111111111166666111111111111666666661116666111666661116666666666611666116666666611111bbbbbbbddddd9999999999
    999999999999999991111111222111122222111111111112222222111111111166666611111111166666666666111666111666666111666661666611666116666666611111bbbbbbbddddd9999999999
    999999999999999999111111222112222222111111111112222222221111111166666666111111166666116666611666111666666611666611166661666116666166611111bbbbbbbddddd9999999999
    999999999999999999111111222222222222111111111112222222222111111166666666661111166666111666611666111666666611666611166661666116661166661111bbbbbbbbdddd9999999999
    999999999999999999111111222222222111111222222111222122222111111166616666666111166661111166611666111666166611666611166661666116661166661111bbbbbbbbdddd9999999999
    999999999999999999911111222222211111122222222111222111222111111166611166666111166661111166611666111666166661666111116661666116661166661111bbbbbbbbdddd9999999999
    99999999999999999991111122221111111122222222211122211122211111116666111166661116666111116661166611166666666166611111666166611666111111111bbbbbbbbbdddd9999999999
    999999999999999999911111222211111111222221222111222111222111111166661111666661166666111666611666111666666661666111116661666116661111111bbbbbbbbbbbdddd9999999999
    999999999999999999991111122211111111222211111111222211222111111116661111166661116666661666611666111666666111666111111111666111111111111bbbbbbbbbbbdddd9999999999
    999999999999999999991111122211111111222211111111222211222111111116661111166661111666666666111666111666661111111111111111666111111111111bbbbbbbbbbbdddd9999999999
    99999999999999999999911112221111111122221111111122222222211111111666111116666111116666666611166611166611111111111111111166611111111111bbbbbbbbbbbbdddd9999999999
    999999999999999999999911111111111111222211111111122222222111111116661111666611111111666661111666111666111111111111111111111111111111bbbbbbbbbbbbbbdddd9999999999
    999999999999999999999911111111111111222211111111112222222111111116661116666611111111111111111111111666111111111111111111111111111bbbbbbbbbbbbbbbbbdddd9999999999
    999999999999999999999991111111111111222211111111111122211111111116661116666111111111111111111111111666111111111111111111111111bbbbbbbbbbbbbbbbbbbbdddd9999999999
    999999999999999999999999111111111111222211111111111111111111111166666666661111111111111111111111111111111111111111111bbbbbbbbbbbbbbbbbbbbbbbbbbbbbdddd9999999999
    99999999999999999999999911111111111122211111111111111111111111116666666666111111111111111111111111111111111111111bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbdddd9999999999
    99999999999999999999999991111111111122211111111111111111111111116666666661111111111111111111111111111111111111bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddd9999999999
    999999999999999999999999991111111111111111111111111111111111111116666611111111111111111111111111111111111111bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddd9999999999
    9999999999999999999999999991111111111111111111111111111111111111166611111111111111111111111111111111111111bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddd9999999999
    999999999999999999999999999911111111111111111111111111111111111111111111111111111111111111111111111111fffffbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddd99999999999
    999999999999999999999999999991111111111111111111111111111111111111111111111111111111111111111111111111ffffffffffffbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbddd99999bb9999
    999999999999999999999999999999999999911111111111111111111111111111111111111111111111111111bbb1111111bbfffffbfff1fffffffffbbbbbbbbbbbbbbbbbbbbbbbbbbdd999bbbbb999
    999999999999999999999999999999999999999911111111111111111111111111111111111111111111111111bbbb1111bbbbbbfffbffff1fbbbbbbbfbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb999
    999999999999999999999999999999999999999999999911111111111111111111111111111111111111111111dddbbbbbbbbbbbbbbbbfffffbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb9999
    999999999999999999999999999999999999999999999999911111111111111111111111111111111111111111ddddbbbbbbbbbbbbbbbffffbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb9999999
    9999999999999999999999999999999999999999999999999999911111111111111111111111111111111111999ddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb999999999
    99999999999999999999999999999999999999999999999999999999999991111111111111111111999999999999dddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb99999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb99999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ddddddbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb9999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddddddbbbbbbbbbbbbbbbbbdddddddbbbbbbbbbbb99999999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddddddddddddddddddddddddddddbbbbbbbb99999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999dddddddddddddddddddddddddddddddd9999999999999999999999999999
    999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ddddddddddddddddddddddddddd9999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9919999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111999991111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111991199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111119999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    1111111111111111111111111111111111199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    `, SpriteKind.Player)
pause(5000)
title.destroy()
titleHidden = true
info.startCountdown(60)
tiles.setTilemap(tilemap`level1`)
dolphin = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    `, SpriteKind.Player)
dolphin.setFlag(SpriteFlag.Ghost, true)
dolphinBody = sprites.create(img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ..33333333333333................
    ..3333333333333333333333333333..
    .333333333333333333333333333333.
    .333333333333333333333333333333.
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    33333333333333333333333333333333
    .333333333333333333333333333333.
    .333333333333333333333333333333.
    ..3333333333333333333333333333..
    ..3333333333333333333333333333..
    ...33333333333333333333333333...
    ....333333333333................
    ................................
    ................................
    ................................
    ................................
    `, SpriteKind.Player)
dolphinBody.setFlag(SpriteFlag.Invisible, true)
dolphin_image = [
img`
    .........bbbb...................
    .........bbbbbb.................
    ..........bbbbbbb....bbbbb......
    ...........bbbbbbbbbbbbbbbb.....
    ...........bbbbbbbbbbbbbbbbb....
    .b......bbbbbbbbbbbbbbbbbbbb....
    .bbb..bbbbbbbbbbbbbbbbbbbfbbb...
    ..bbbbbbbbbbbbbbbbbbbbbbbbbbbbb.
    ..bbbbbbbbbbbdddddbbbbbbbbddddd.
    ...bbbbbddddddddddddbbbbdddddd..
    ...bb.........ddddddbbbbd.......
    ..bb...............bbbb.........
    ..bb..............bbbb..........
    ..b..............bbb............
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    `,
img`
    ............bb..................
    .......bb...bb..................
    .......bbbb.bb..................
    .........bbbbb..................
    ..........bbbb..................
    ...........bbbbb.......b........
    ............bbbbbb.....bb.......
    .............bbbbbbb...bb.......
    .............dbbbbbbb.bbb.......
    ..............ddbbbbbbbbb.......
    ...............ddbbbbbbbb.......
    ...............dddbbbbbbb.......
    ................dddbbbbbb.......
    .................dddbbbbbb......
    ..................dddbbbbbb.....
    ...................dddbbbbbbb...
    ...................dddbbbbbbbb..
    ...............bb...dddbbbbbbb..
    ...............bbbbbbbbbbbbbbbb.
    .................bbbbbbbbbbbbbb.
    ..................bbbbbbbbbbbbb.
    ....................bbbbbbbbbbb.
    .......................dbbbfbbb.
    .......................ddbbbbb..
    ........................ddbbb...
    .........................ddbb...
    .........................ddbb...
    ..........................dbb...
    ...........................db...
    ................................
    ................................
    ................................
    `,
img`
    ..................b......b......
    ..................bb....bb......
    ..................bbb..bb.......
    ...................bbbbbb.......
    ....................bbbb........
    .....................bb.........
    .....................bb.........
    .....................bbb........
    .....................bbb........
    .....................bbbb.......
    ....................dbbbb....bb.
    ....................dbbbb...bbb.
    ....................dbbbbbbbbbb.
    ...............b...ddbbbbbbbbb..
    ...............bb..ddbbbbbbbbb..
    ...............bbb.dbbbbbbbbb...
    ................bbbbbbbbbbbb....
    ................bbbbbbbbbbb.....
    .................bbbbbbbbbb.....
    ..................bbbbbbbbb.....
    ..................dbbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbbbbbb.....
    ..................ddbbfbbbb.....
    ..................ddbbbbbb......
    ..................ddbbbb........
    ...................dbb..........
    ...................dbb..........
    ...................dbb..........
    `,
img`
    ................................
    ................................
    ................................
    ................................
    ............................b...
    ............................b...
    ...........................bb...
    ...........................bb...
    ...........................bbbb.
    .........................bbbbbbb
    ........................dbbb....
    ......................ddbbb.....
    .....................dddbbb.....
    .............bb.....ddbbbb......
    .............bb...dddbbbbb......
    .............bb..dddbbbbbb......
    ............bbbddddbbbbbb.......
    ............bbbddbbbbbbb........
    ...........bbbbbbbbbbbbb........
    ...........bbbbbbbbbbbbbbbbbbbb.
    ...........bbbbbbbbbbbbbbbbbbb..
    ..........dbbbbbbbbbbbbbbbbb....
    .........ddbbbbbbbbbbbbbbbb.....
    ........dddbbbbbbbbb............
    .......dddbbbbbbbbb.............
    .......ddbbbbbbbbb..............
    ......ddbbbbbbbbbb..............
    .....ddbbfbbbbbbb...............
    .....dbbbbbbbbbb................
    ....ddbbbbbbbbb.................
    ....dbb...bbb...................
    ................................
    `,
img`
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    ...............bb...............
    .............bbbb...............
    ............bbbb..............bb
    ...........bbbbbddddddddd...bbb.
    ..ddddddddbbbbbddddddddddddbbb..
    .dddddddbbbbbbbbbbbbbbbbbbbbb...
    .bbbbbbbbbbbbbbbbbbbbbbbbbbbbb..
    ..bbbbbfbbbbbbbbbbbbbbbbbbb..bbb
    .....bbbbbbbbbbbbbbbbbbbb.....bb
    .....bbbbbbbbbbbbbbbbbb.........
    .....bbbbbbbbbbbbbbbbbb.........
    .......bbbbbbbbbbbbbbbb.........
    ..........bbbbb....bbbbbb.......
    ....................bbbbbbb.....
    `,
img`
    ................................
    ................................
    ................................
    .bd.............................
    .bbd............................
    .bbbd...........................
    ..bbbd..........................
    ..bbbdd.........................
    .bbbfbddd.......................
    .bbbbbbbbbbb....................
    .bbbbbbbbbbbbbbbb...............
    .bbbbbbbbbbbbbbbbb..............
    ..bbbbbbbbbddbbbbb..............
    ..bbbbbbbbbdd...................
    ...bbbbbbbbddd..................
    ...bbbbbbbbbddd.................
    ...bbbbbbbbbddd.................
    ....bbbbbbbbbddd................
    .....bbbbbbbbbdd................
    ......bbbbbbbbbdd...............
    ......bbbbbbbbbbdd..............
    .....bbbbbbbbbbbbbb.............
    .....bbbbbbbbbbbbbb.............
    .....bbbbbbbbbbbbbbb............
    .....bbb...bbbbbbbbb............
    .....bbb....bbbbbbbbb...........
    .....bb.........bbbbbb..........
    ......b............bbbbbbb......
    ...................bbbbbbb......
    ...................bbb..........
    ....................b...........
    ....................b...........
    `,
img`
    ................................
    ........bd......................
    ........bdd.....................
    ........bdd.....................
    ......bbbdd.....................
    .....bbfbdd.....................
    .....bbbbdd.....................
    ....bbbbbdd.....................
    ....bbbbbbbb....................
    ...bbbbbbbbb....................
    ...bbbbbbbbbb...................
    ...bbbbbbbbbb...................
    ...bbbbbbbbbb...................
    ...bbbbbbddbbb..................
    ..bbbbbbbdd.bb..................
    .bbbbbbbbdd..b..................
    .bbbbbbbbdd.....................
    bbbbbbbbbdd.....................
    bbbbbbbbbdd.....................
    bbb.bbbbbdd.....................
    bb...bbbbdd.....................
    b....bbbbbd.....................
    ......bbbbd.....................
    .......bbbd.....................
    .......bbbb.....................
    ........bbb.....................
    ........bbb.....................
    ........bbbb....................
    .......bbbbbb...................
    .......bbb.bbb..................
    .......bb...bbb.................
    ......bb......b.................
    `,
img`
    ................................
    ..................bb............
    ................bbbbbb..........
    ...............bbbbbbbbbbbb.....
    .............bbbbbbbbfbbbdd.....
    ............bbbbbbbbbbbbdd......
    .......bbbbbbbbbbbbbbbbdd.......
    .....bbbbbbbbbbbbbbbbbdd........
    ...bbbbbbbbbbbbbbbbbbbd.........
    ...bbbbbbbbbbbbbbbbbbb..........
    .........bbbbbbbbbdbbb..........
    .........bbbbbbbdddbbb..........
    ........bbbbbbbddd.bb...........
    .......bbbbbbbddd..bb...........
    .......bbbbbddd....bb...........
    ......bbbbbddd.....bb...........
    ......bbbbddd......b............
    .....bbbbdd.....................
    .....bbbdd......................
    .bbbbbbb........................
    bbbbbb..........................
    ...bbb..........................
    ...bbb..........................
    ....bb..........................
    ....bb..........................
    ....bb..........................
    .....b..........................
    ................................
    ................................
    ................................
    ................................
    ................................
    `
]
backflip_images = []
for (let value of dolphin_image) {
    dolphin_image_temp = value.clone()
    dolphin_image_temp.flipX()
    backflip_images.push(dolphin_image_temp)
}
direction = 0
dolphin.z = 5
scene.cameraFollowSprite(dolphinBody)
tiles.placeOnRandomTile(dolphinBody, assets.tile`tile20`)
for (let value of tiles.getTilesByType(assets.tile`tile7`)) {
    tiles.setTileAt(value, assets.tile`tile3`)
    ringBack = sprites.create(img`
        ................................
        ......bbbbbbbbbbb...............
        ...bbbbcccccccccbbb.............
        ..bbcccc........ccbbb...........
        .bbcc.............cbbbb.........
        .bcc...............ccbbbb.......
        .....................ccbbb......
        .......................ccbb.....
        ........................cbbb....
        .........................ccbb...
        ...........................cbb..
        ...........................cbb..
        ............................cbb.
        ............................cbb.
        .............................cb.
        .............................cbb
        .............................cbb
        ..............................cb
        ..............................cb
        ..............................cb
        ..............................cb
        .............................cbb
        .............................cbb
        .............................cb.
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `, SpriteKind.RingBack)
    ringBack.z = 6
    ringFront = sprites.create(img`
        ................................
        ................................
        ................................
        ................................
        .c..............................
        ccb.............................
        cb..............................
        cb..............................
        cb..............................
        cbb.............................
        ccbb............................
        cccb............................
        .ccb............................
        .ccb............................
        .ccbb...........................
        ..ccb...........................
        ..cccb..........................
        ...ccb..........................
        ...cccbb........................
        ....ccabb.......................
        .....caab.......................
        ......caab....................bc
        .......caab..................bbc
        .......ccabb................bccc
        ........caabb...............bcc.
        .........caabbb............bcc..
        ..........caaaabb........bbcc...
        ...........ccccaabbbbbbbbccc....
        ...............ccccccccccc......
        ..................cccccc........
        ................................
        ................................
        `, SpriteKind.Ring)
    ringFront.z = 3
    tiles.placeOnTile(ringBack, value)
    tiles.placeOnTile(ringFront, value)
}
for (let value of tiles.getTilesByType(assets.tile`tile21`)) {
    tiles.setTileAt(value, assets.tile`tile3`)
    starman = sprites.create(assets.tile`tile21`, SpriteKind.Collectible)
    tiles.placeOnTile(starman, value)
}
let altimeter = textsprite.create("", 0, 3)
altimeter.setFlag(SpriteFlag.RelativeToCamera, true)
altimeter.setPosition(34, 14)
trick_text = textsprite.create("")
trick_text.setFlag(SpriteFlag.RelativeToCamera, true)
trick_text_line_2 = textsprite.create("")
trick_text_line_2.setFlag(SpriteFlag.RelativeToCamera, true)
lame_text = textsprite.create("", 0, 2)
lame_text.setFlag(SpriteFlag.RelativeToCamera, true)
game.onUpdate(function () {
    dolphin.setPosition(dolphinBody.x, dolphinBody.y)
    if (areWeUnderTheSea && game.runtime() > controlLockEndTime) {
        if (controller.up.isPressed()) {
            if (controller.left.isPressed()) {
                moveTowardsAngle(225)
            } else if (controller.right.isPressed()) {
                moveTowardsAngle(315)
            } else {
                moveTowardsAngle(270)
            }
        } else if (controller.down.isPressed()) {
            if (controller.left.isPressed()) {
                moveTowardsAngle(135)
            } else if (controller.right.isPressed()) {
                moveTowardsAngle(45)
            } else {
                moveTowardsAngle(90)
            }
        } else if (controller.left.isPressed()) {
            moveTowardsAngle(180)
        } else if (controller.right.isPressed()) {
            moveTowardsAngle(0)
        } else {
            currentSpeed = 90
        }
    } else {
        currentSpeed = 90
        direction = Math.round(Math.map(Math.atan2(dolphinBody.vy, dolphinBody.vx), -3.14, 3.14, -180, 180))
        if (direction < 0) {
            direction += 360
        }
    }
    if (!(doingATrick)) {
        dolphin.setImage(dolphin_image[Math.round(Math.map((direction + 15) % 360, 0, 360, 0, 7))])
    }
})
game.onUpdate(function () {
    if (!(areWeUnderTheSea)) {
        altimeter.setText("" + Math.floor((648 - dolphin.y) / 16) + "." + Math.trunc((648 - dolphin.y) / 1.6) % 10 + "m")
        altimeter.left = 2
        altimeter.top = 2
    } else {
        altimeter.setText("")
    }
})
game.onUpdateInterval(5000, function () {
    bird = sprites.create(img`
        . . . . . . . . f f f f . . . . 
        . . . . . . . . f f f f f . . . 
        . . . . . . . f f f 1 f f . . . 
        . . . . 1 1 f f 1 1 1 1 f f . . 
        . . . 1 1 1 f f 1 1 1 1 f f . . 
        . . 1 f 1 1 f f f 1 1 f f . 1 1 
        4 1 1 f 1 1 1 f f f f f 1 1 1 1 
        4 1 1 1 1 1 1 1 1 f f f 1 . . . 
        4 4 d 1 1 1 1 1 1 1 1 1 1 . . . 
        . . d d 1 1 1 1 1 1 1 1 1 . . . 
        . . . d d d 1 1 1 1 1 1 1 1 . . 
        . . . . . . . d 1 1 1 1 1 1 1 . 
        . . . . . . . . d d 1 1 4 1 1 4 
        . . . . . . . . . d 1 1 1 4 4 . 
        . . . . . . . . . . . . . . 4 4 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Bird)
    animation.runImageAnimation(
    bird,
    [img`
        . . . . . . . . f f f f . . . . 
        . . . . . . . . f f f f f . . . 
        . . . . . . . f f f 1 f f . . . 
        . . . . 1 1 f f 1 1 1 1 f f . . 
        . . . 1 1 1 f f 1 1 1 1 f f . . 
        . . 1 f 1 1 f f f 1 1 f f . 1 1 
        4 1 1 f 1 1 1 f f f f f 1 1 1 1 
        4 1 1 1 1 1 1 1 1 f f f 1 . . . 
        4 4 d 1 1 1 1 1 1 1 1 1 1 . . . 
        . . d d 1 1 1 1 1 1 1 1 1 . . . 
        . . . d d d 1 1 1 1 1 1 1 1 . . 
        . . . . . . . d 1 1 1 1 1 1 1 . 
        . . . . . . . . d d 1 1 4 1 1 4 
        . . . . . . . . . d 1 1 1 4 4 . 
        . . . . . . . . . . . . . . 4 4 
        . . . . . . . . . . . . . . . . 
        `,img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 1 1 1 1 . . . . . . . . 
        . . . 1 1 1 1 1 1 1 . . . . . . 
        . . 1 f 1 1 1 1 1 1 1 1 . . 1 1 
        4 1 1 f 1 1 1 f 1 1 1 1 1 1 1 1 
        4 1 1 1 1 1 1 f f f 1 1 1 . . . 
        4 4 d 1 1 1 1 f f f f 1 1 . . . 
        . . d d 1 1 1 f f f f 1 1 . . . 
        . . . d d d 1 f f f f 1 1 1 . . 
        . . . . . . f f f f f 1 1 1 1 . 
        . . . . . . f f f f f 1 4 1 1 4 
        . . . . . . f f f f 1 1 1 4 4 . 
        . . . . . . f . . . . . . . 4 4 
        . . . . . . . . . . . . . . . . 
        `],
    500,
    true
    )
    tiles.placeOnRandomTile(bird, assets.tile`tile3`)
    bird.right = 864
    bird.vx = -70
    bird.setFlag(SpriteFlag.DestroyOnWall, true)
})
game.onUpdateInterval(1000, function () {
    if (sprites.allOfKind(SpriteKind.Food).length < 20) {
        createEdibleFish()
    }
})
